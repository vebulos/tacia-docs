<div class="space-y-1">
  <!-- Loading State -->
  <div *ngIf="loading" class="p-4 text-center">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
    <p class="mt-2 text-sm text-gray-500">Loading navigation...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="p-4 bg-red-50 dark:bg-red-900/20 rounded-md">
    <p class="text-red-600 dark:text-red-400 text-sm">{{ error }}</p>
    <button 
      (click)="loadNavigation()"
      class="mt-2 px-3 py-1 text-sm bg-red-100 hover:bg-red-200 text-red-700 rounded-md"
    >
      Retry
    </button>
  </div>

  <!-- Navigation Items -->
  <ng-container *ngIf="!loading && !error">
    <div *ngFor="let category of contentStructure" class="relative">
      <!-- Category Header -->
      <div 
        (click)="onCategoryClick(category, $event)"
        (mouseenter)="onCategoryMouseEnter(category)"
        class="px-3 py-2 text-sm font-medium text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer flex justify-between items-center rounded-md"
      >
        <span>{{ category.metadata?.title || category.name }}</span>
        <svg 
          [class.transform]="category.isOpen" 
          [class.rotate-180]="category.isOpen"
          class="w-4 h-4 text-gray-400 transition-transform duration-200" 
          fill="none" 
          viewBox="0 0 24 24" 
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </div>
      
      <div 
        *ngIf="category.isOpen" 
        class="mt-1 space-y-0.5 transition-all duration-200 ease-in-out overflow-hidden"
        [@slideInOut]="category.isOpen ? 'expanded' : 'collapsed'"
      >
        <ng-container *ngFor="let item of category.children">
          <!-- Directory -->
          <div *ngIf="item.isDirectory">
            <!-- Directory Header -->
            <div class="px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center">
              <svg class="w-4 h-4 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
              {{ item.metadata?.title || item.name }}
            </div>
            
            <!-- Directory Children -->
            <div class="ml-6 border-l border-gray-200 dark:border-gray-700 pl-2 space-y-0.5">
              <a 
                *ngFor="let child of item.children" 
                [routerLink]="'/docs/content/' + child.path"
                [queryParams]="{}"
                routerLinkActive="bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-l-2 border-blue-500"
                class="block pl-3 pr-2 py-1.5 text-sm font-normal text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800/50 hover:text-gray-900 dark:hover:text-white rounded-r-md"
              >
                <span class="truncate">{{ child.metadata?.title || child.name }}</span>
              </a>
            </div>
          </div>
          
          <!-- Regular file -->
          <a 
            *ngIf="!item.isDirectory" 
            [routerLink]="'/docs/content/' + item.path"
            [queryParams]="{}"
            routerLinkActive="bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"
            class="flex items-center px-3 py-1.5 text-sm font-normal text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800/50 hover:text-gray-900 dark:hover:text-white rounded-md"
          >
            <svg class="w-4 h-4 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <span class="truncate">{{ item.metadata?.title || item.name }}</span>
          </a>
        </ng-container>
      </div>
    </div>
  </ng-container>
</div>
